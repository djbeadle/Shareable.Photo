{% extends "base.html" %}

{% block scripts %}
<link href="https://releases.transloadit.com/uppy/v2.3.2/uppy.min.css" rel="stylesheet">
{% endblock %}

{% block content %}
<blockquote>{{ event_description }}</blockquote>

<div id="drag-drop-area"></div>

<a href="/get_event/{{user_facing_id}}">Gallery</a>
<h3>NOTE: Files are not encrypted and can be viewed by system administrators.</h3>

<script src="https://releases.transloadit.com/uppy/v2.3.2/uppy.min.js"></script>
<script>
    const { AwsS3 } = window.Uppy;

    var uppy = new Uppy.Core(
        {
            restrictions: {
                allowedFileTypes: ['.jpg', '.JPG', '.jpeg', '.JPEG', '.heic', '.heif', '.png', '.PNG', '.mov', '.MOV', '.mp4', '.MP4', '.gif', '.GIF', '.mkv'],
            },
        })
        .use(Uppy.Dashboard, {
            inline: true,
            target: '#drag-drop-area',
        })
        .use(AwsS3, {
            limit: 2,
            timeout: 60000, // 1 minute
            companionUrl: '/{{user_facing_id}}/'
        })

    uppy.on('complete', (result) => {
        console.log('Upload complete! Weâ€™ve uploaded these files:', result.successful)
    })
</script>
{% endblock %}
